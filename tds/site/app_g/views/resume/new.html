<ion-view view-title="创建新简历">

    <ion-content delegate-handle="posContent" class="pos-new">
        <form class="form" novalidate name="resumeNew.form" ng-submit="vm.submit()">
            <div class="list ">
                <label class="item item-input"
                       ng-class="{'error':(vm.submited&&resumeNew.form.cv_name.$error.required)||resumeNew.form.cv_name.$error.maxlength}">
                    <span class="input-label"><sup class="red">*</sup> 简历名称：</span>
                    <input type="text" required name="cv_name" maxlength="8" ng-model="vm.mod.cv_name">
                </label>
            </div>
            <div class="list">
                <div class="item item-divider">
                    基本信息
                </div>

                <label class="item item-input"
                       ng-class="{'error':(vm.submited&&resumeNew.form.name.$error.required)||resumeNew.form.name.$error.maxlength}">
                    <span class="input-label"><sup class="red">*</sup> 姓名：</span>
                    <input type="text" required name="name" maxlength="10" ng-model="vm.mod.name">
                </label>

                <label class="item item-input"
                       ng-class="{'error':(vm.submited&&resumeNew.form.age.$error.required)||resumeNew.form.age.$error.number}">
                    <span class="input-label"><sup class="red">*</sup> 年龄：</span>
                    <input type="number" required name="age" ng-model="vm.mod.age">
                </label>

                <div class="item">
                    <label class="mr10 "><input type="radio" ng-value="1" ng-model="vm.mod.gender" checked
                                                name="gender"> 男</label>
                    <label><input ng-model="vm.mod.gender" ng-value="0" type="radio"
                                  name="gender">
                        女</label>
                </div>
                <label class="item item-input" ng-class="{'error':vm.submited&&resumeNew.form.mobile.$error.required}">
                    <span class="input-label"><sup class="red">*</sup> 手机：</span>
                    <input type="text" required name="mobile" ng-model="vm.mod.mobile" maxlength="15">
                </label>
                <label class="item item-input"
                       ng-class="{'error':resumeNew.form.email.$error.email||(vm.submited&&resumeNew.form.email.$error.required)}">
                    <span class="input-label"><sup class="red">*</sup> 邮箱：</span>
                    <input type="email" required name="email" ng-model="vm.mod.email">
                </label>
                <label class="item item-input">
                    <span class="input-label">工作经验：</span>
                    <input type="number" ng-model="vm.mod.work_exp">
                </label>
            </div>
            <div class="list edu-list ">

                <div class="group" ng-repeat="n in vm.eduViewArr">
                    <div class="item item-divider">
                        教育背景 <span class="small gray">{{$index>0?'('+$index+')':''}}</span> <i
                            class="ion-minus-round pull-right" ng-if="$index>0"
                            ng-click="vm.removeEduGroup(n)"></i>
                    </div>
                    <label class="item item-input">
                        <span class="input-label">开始时间：</span>
                        <input ng-if='isIOS' type="date" class="date" ng-model="vm.mod.edu[$index].startTime"
                               placeholder="开始时间">
                        <ionic-datepicker ng-if="!isIOS" ng-click="vm.setLoc('edu',$index,'startTime')" input-obj="vm.datepickerObjectPopup">
                            <input type="text" readonly   placeholder="点击选择日期" ng-model="vm.mod.edu[$index].startTime |date:'yyyy-MM-dd'" >
                        </ionic-datepicker>

                    </label>
                    <label class="item item-input">
                        <span class="input-label">结束时间：</span>
                        <input ng-if='isIOS' type="date" ng-model="vm.mod.edu[$index].endTime" placeholder="结束时间">
                        <ionic-datepicker ng-if="!isIOS" ng-click="vm.setLoc('edu',$index,'endTime')" input-obj="vm.datepickerObjectPopup">
                            <input type="text"  readonly  placeholder="点击选择日期" ng-model="vm.mod.edu[$index].endTime |date:'yyyy-MM-dd'" >
                        </ionic-datepicker>

                    </label>
                    <label class="item item-input">
                        <span class="input-label">学校：</span>
                        <input type="text" ng-model="vm.mod.edu[$index].school">
                    </label>

                    <label class="item item-input item-select">
                    <span class="input-label">
                        学历：
                    </span>
                        <select ng-model="vm.mod.edu[$index].degree" class="col col-75">
                            <option value="{{item}}" ng-repeat="item in vm.view.edu">{{item}}</option>
                        </select>
                    </label>
                    <label class="item item-input">
                        <span class="input-label">专业：</span>
                        <input type="text" ng-model="vm.mod.edu[$index].major">
                    </label></div>
                <div class="padding"><a class="button button-light button-block button-small"
                                        ng-click="vm.addGroup(vm.eduViewArr)">添加教育背景</a>
                </div>
            </div>
            <div class="list ">
                <div class="group" ng-repeat="n in vm.expViewArr">
                    <div class="item item-divider">
                        工作经历 <span class="small gray">{{$index>0?'('+$index+')':''}}</span> <i
                            class="ion-minus-round pull-right" ng-if="$index>0"
                            ng-click="vm.removeExpGroup(n)"></i>
                    </div>
                    <label class="item item-input">
                        <span class="input-label">开始时间：</span>
                        <input ng-if='isIOS' type="date" ng-model="vm.mod.exp[$index].startTime">
                        <ionic-datepicker ng-if="!isIOS" ng-click="vm.setLoc('exp',$index,'startTime')" input-obj="vm.datepickerObjectPopup">
                            <input type="text"   placeholder="点击选择日期" readonly ng-model="vm.mod.exp[$index].startTime |date:'yyyy-MM-dd'" >
                        </ionic-datepicker>

                    </label>
                    <label class="item item-input">
                        <span class="input-label">结束时间：</span>
                        <input ng-if='isIOS' type="date" ng-model="vm.mod.exp[$index].endTime">
                        <ionic-datepicker ng-if="!isIOS" ng-click="vm.setLoc('exp',$index,'endTime')" input-obj="vm.datepickerObjectPopup">
                            <input type="text" placeholder="点击选择日期"  readonly ng-model="vm.mod.exp[$index].endTime |date:'yyyy-MM-dd'" >
                        </ionic-datepicker>

                    </label>

                    <label class="item item-input">
                        <span class="input-label">公司：</span>
                        <input type="text" ng-model="vm.mod.exp[$index].company">
                    </label>
                    <label class="item item-input">
                        <span class="input-label">所任职位：</span>
                        <input type="text" ng-model="vm.mod.exp[$index].position">
                    </label>
                    <label class="item item-input">
                        <span class="input-label">工作描述：</span>
                        <input type="text" ng-model="vm.mod.exp[$index].detail">
                    </label>
                </div>
                <div class="padding"><a class="button nomargin button-light button-block button-small"
                                        ng-click="vm.addGroup(vm.expViewArr)">添加工作经验</a>
                </div>
            </div>
            <div class="list">
                <div class="item" ng-class="{error:vm.submited&&!vm.agree}">
                    <label class="word-no-warp"><input type="checkbox" ng-model="vm.agree"/>
                        本人承诺所有提供的个人资料真实有效，并同意以上个人资料将会用于{{corp.full_name}}人才吸引和招聘用途。</label>
                </div>
            </div>
            <div class="list" ng-if="vm.fileName">
                <div class="item item-input">
                    <span class="input-label">附件：</span>
                    <span class="font-color">{{vm.fileName}}.{{vm.fileType}}</span>
                </div>
            </div>

            <div class="padding">
                <button class="button button-block button-assertive ">提交</button>
            </div>

        </form>
    </ion-content>
</ion-view>
