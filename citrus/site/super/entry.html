<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>授权登陆</title>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
    <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
</head>
<body>
<h1>授权登陆</h1>
<div>公众号运营者可以点击如下链接，对第三方平台进行授权。</div>
<a id="link"><h1>一键授权</h1></a>

</body>

<script>
    $(function(){
        $.get("/super/wx/preauth", function(res){
            var url = "https://mp.weixin.qq.com/cgi-bin/componentloginpage?" +
                    "component_appid=" + res['app_id'] +
                    "&pre_auth_code=" + res['value'] +
                    "&redirect_uri=" + callback_url;
            $('#link').attr('href', url);
        })
    });
</script>

</html>
